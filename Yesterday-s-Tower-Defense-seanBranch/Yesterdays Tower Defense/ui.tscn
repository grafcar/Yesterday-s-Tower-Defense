[gd_scene load_steps=10 format=3 uid="uid://lk4hjjjpjr15"]

[ext_resource type="PackedScene" uid="uid://cuudyrgg6efs" path="res://Scenes/towers/ninjapenguin_panel.tscn" id="1_3i8v0"]
[ext_resource type="PackedScene" uid="uid://byiw4vc3po0fn" path="res://Scenes/towers/penguin_panel.tscn" id="2_q53cy"]
[ext_resource type="PackedScene" uid="uid://q0uh37gupwyn" path="res://Scenes/towers/igloo_panel.tscn" id="2_rneha"]
[ext_resource type="Script" path="res://Scripts/penguin_panel.gd" id="5_pbvnb"]
[ext_resource type="PackedScene" uid="uid://c5le8t7gt6dxf" path="res://Scenes/towers/macpenguin_panel.tscn" id="6_fr0bn"]
[ext_resource type="Script" path="res://Health.gd" id="7_51rwl"]
[ext_resource type="Script" path="res://Scripts/macpenguin_panel.gd" id="7_yjqx5"]
[ext_resource type="Script" path="res://Gold.gd" id="8_vbmju"]

[sub_resource type="GDScript" id="GDScript_36kha"]
script/source = "extends Panel

@onready var tower = preload(\"res://Scenes/towers/igloo_tower.tscn\")
var currTile

func _on_gui_input(event):
	var tempTower = tower.instantiate()
	if event is InputEventMouseButton and event.button_mask == 1 and Game.Gold >= 5:
		add_child(tempTower)

		tempTower.process_mode = Node.PROCESS_MODE_DISABLED
		
		tempTower.scale = Vector2(0.32,0.32)
		
	elif event is InputEventMouseMotion and event.button_mask == 1 and Game.Gold >= 5:
		get_child(1).global_position = event.global_position

		var mapPath = get_tree().get_root().get_node(\"Main/TileMap\")
		var tile = mapPath.local_to_map(get_global_mouse_position())
		currTile = mapPath.get_cell_atlas_coords(0, tile, false)
		if (currTile == Vector2i(4,8)):
			get_child(1).get_node(\"Area\").modulate = Color(0,255,0,.2)
		else:
			get_child(1).get_node(\"Area\").modulate = Color(255,0,0,.2)

	elif event is InputEventMouseButton and event.button_mask == 0 and Game.Gold >= 5:
		if get_child_count() > 1:
			get_child(1).queue_free()
		
		if currTile == Vector2i(4,8):
				var path = get_tree().get_root().get_node(\"Main/Towers\")
				path.add_child(tempTower)
				tempTower.global_position = event.global_position
				tempTower.get_node(\"Area\").hide()
				Game.Gold -= 5
		
	else:
		if get_child_count() > 1:
			get_child(1).queue_free()
"

[node name="UI" type="CanvasLayer"]

[node name="Panel" type="Panel" parent="."]
offset_left = 2061.0
offset_top = 1.0
offset_right = 2305.0
offset_bottom = 1286.0

[node name="FlowContainer" type="FlowContainer" parent="Panel"]
layout_mode = 0
offset_left = -217.0
offset_top = -4.0
offset_right = 242.0
offset_bottom = 1296.0

[node name="Cost4" type="Label" parent="Panel"]
layout_mode = 0
offset_left = 86.0
offset_top = 558.0
offset_right = 152.0
offset_bottom = 636.0
theme_override_font_sizes/font_size = 57
text = "10
"

[node name="Cost2" type="Label" parent="Panel"]
layout_mode = 0
offset_left = 91.0
offset_top = 1135.0
offset_right = 157.0
offset_bottom = 1213.0
theme_override_font_sizes/font_size = 57
text = "20
"

[node name="Cost3" type="Label" parent="Panel"]
layout_mode = 0
offset_left = 88.0
offset_top = 264.0
offset_right = 154.0
offset_bottom = 342.0
theme_override_font_sizes/font_size = 57
text = "5
"

[node name="Cost" type="Label" parent="Panel"]
layout_mode = 2
offset_left = 89.0
offset_top = 842.0
offset_right = 155.0
offset_bottom = 920.0
theme_override_font_sizes/font_size = 57
text = "15
"

[node name="ninjapenguinPanel" parent="Panel" instance=ExtResource("1_3i8v0")]
layout_mode = 0
offset_left = 25.0
offset_top = 922.0
offset_right = 230.0
offset_bottom = 1137.0

[node name="IglooPanel" parent="Panel" instance=ExtResource("2_rneha")]
layout_mode = 0
offset_left = 16.0
offset_top = 50.0
offset_right = 225.0
offset_bottom = 263.0
script = SubResource("GDScript_36kha")

[node name="penguinPanel" parent="Panel" instance=ExtResource("2_q53cy")]
layout_mode = 0
offset_left = 9.0
offset_top = 339.0
offset_right = 217.0
offset_bottom = 561.0
script = ExtResource("5_pbvnb")

[node name="macpenguinPanel" parent="Panel" instance=ExtResource("6_fr0bn")]
layout_mode = 0
offset_left = 18.0
offset_top = 636.0
offset_right = 217.0
offset_bottom = 851.0
script = ExtResource("7_yjqx5")

[node name="Health" type="Label" parent="."]
offset_left = 3.0
offset_top = 6.0
offset_right = 351.0
offset_bottom = 143.0
theme_override_font_sizes/font_size = 100
text = "Health:"
script = ExtResource("7_51rwl")

[node name="Gold" type="Label" parent="."]
offset_left = 668.0
offset_top = -2.0
offset_right = 1060.0
offset_bottom = 135.0
theme_override_font_sizes/font_size = 100
text = "Health:"
script = ExtResource("8_vbmju")
